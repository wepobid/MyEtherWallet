(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-252ef923"],{"03c0":function(t,e,a){},"0c2f":function(t,e,a){},"130b":function(t,e,a){"use strict";var n=a("0c2f"),i=a.n(n);i.a},"148d":function(t,e,a){},"212e":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-maker"},[a("deposit-modal",{ref:"deposit",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{lockEth:t.lockEth}}),a("generate-modal",{ref:"generate",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{drawDai:t.drawDai}}),a("withdraw-modal",{ref:"withdraw",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,freeEth:t.freeEth}}),a("payback-modal",{ref:"payback",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,wipeDai:t.wipeDai}}),a("close-cdp-modal",{ref:"closeCdp",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"tokens-with-balance":t.tokensWithBalance},on:{approveDai:t.approveDai,approveMkr:t.approveMkr,closeCdp:t.closeCdp}}),a("move-cdp-modal",{ref:"moveCdp",attrs:{values:t.activeValues,"calc-collat-ratio-dai-chg":t.calcCollatRatioDaiChg,"calc-collat-ratio-eth-chg":t.calcCollatRatioEthChg,"calc-liquidation-price-eth-chg":t.calcLiquidationPriceEthChg,"calc-liquidation-price-dai-chg":t.calcLiquidationPriceDaiChg,"dest-address-has-proxy":t.destAddressHasProxy,"dest-address-proxy":t.destAddressProxy,"tokens-with-balance":t.tokensWithBalance},on:{moveCdp:t.moveCdp,checkForProxy:t.checkIfDestAddressHasProxy}}),a("back-button",{attrs:{path:"/interface/dapps/"}},[a("div",{staticClass:"back-bar-container"},[t.showMoveOrClose?a("div",{staticClass:"header-buttons-container"},[a("div",{staticClass:"inner-container"},[a("button",{staticClass:"move-btn",on:{click:t.showMove}},[a("h4",[t._v(t._s(t.$t("dappsMaker.move-title")))])]),!t.hasProxy&&!t.onCreate||t.showCdpMigrateButtons?t._e():a("div",[a("button",{staticClass:"close-btn",on:{click:t.showClose}},[a("h4",[t._v(t._s(t.$t("dappsMaker.close-title")))])])])])]):t._e()])]),t.makerActive?a("div",{staticClass:"buttons-container"},[t.showCreateProxy?a("div",[a("div",{staticClass:"dapps-button",on:{click:t.buildProxy}},[a("h4",[t._v(t._s(t.$t("dappsMaker.create-proxy")))])])]):t._e(),t.showCreateProxy?a("div",{staticClass:"proxy-container"},[t._v(" "+t._s(t.$t("dappsMaker.proxy-instructions"))+" ")]):t._e(),t.showCdpMigrateButtons?a("div",t._l(t.cdpsWithoutProxy,(function(e,n){return a("div",{key:n+e},[a("div",{staticClass:"dapps-button"},[a("div",{on:{click:function(a){return t.migrateCdpExternal(e)}}},[a("h4",[t._v(" "+t._s(t.$t("dappsMaker.migrate-cdp",{value:e}))+" ")])])])])})),0):t._e(),t.showCdpMigrateButtons?a("div",{staticClass:"proxy-container"},[t._v(" "+t._s(t.$t("dappsMaker.migrate-instructions"))+" ")]):t._e()]):t._e(),a("div",{directives:[{name:"show",rawName:"v-show",value:t.makerActive,expression:"makerActive"}],staticClass:"buttons-container"},[t.showCreateProxy&&t.cdpsWithoutProxy.length>1?a("div",t._l(t.cdpsWithoutProxy,(function(e,n){return a("div",{key:n+e},[a("div",{class:["dapps-button",t.activeValues.cdpId===e?"active":""]},[a("div",{on:{click:function(a){return t.openMigrate(e)}}},[a("h4",[t._v(t._s(t.$t("dappsMaker.cdp"))+" #"+t._s(e))])])])])})),0):t._e()]),a("div",{directives:[{name:"show",rawName:"v-show",value:t.makerActive&&t.listCdps,expression:"makerActive && listCdps"}],staticClass:"buttons-container"},t._l(t.cdps,(function(e,n){return a("div",{key:n+e},[a("div",{class:["dapps-button",t.activeValues.cdpId===e?"active":""]},[a("div",{on:{click:function(a){return t.openManage(e)}}},[a("h4",[t._v(t._s(t.$t("dappsMaker.cdp"))+" #"+t._s(e))])])])])})),0),a("router-view",{attrs:{"build-empty":t.buildEmpty,"maker-active":t.makerActive,"eth-price":t.ethPrice,"peth-price":t.pethPrice,"peth-min":t.pethMin,"weth-to-peth-ratio":t.wethToPethRatio,"liquidation-penalty":t.liquidationPenalty,"stability-fee":t.stabilityFee,"liquidation-ratio":t.liquidationRatio,"price-service":t.priceService,"cdp-service":t.cdpService,"proxy-service":t.proxyService,cdps:t.cdps,"cdp-details-loaded":t.cdpDetailsLoaded,"tokens-with-balance":t.tokensWithBalance,"migration-in-progress":t.migrationInProgress,"open-close-modal":t.openCloseModal,"open-move-modal":t.openMoveModal,"values-updated":t.valuesUpdated,values:t.activeValues,"get-cdp":t.getCdp,"has-cdp":t.hasCdp,"loading-message1":t.$t("dappsMaker.initial-loading-one"),"loading-message2":t.$t("dappsMaker.initial-loading-two")},on:{activeCdpId:t.setupCdpManage,cdpOpened:t.addCdp,cdpClosed:t.removeCdp,modalHidden:t.modalHidden,managerUpdate:t.doUpdate,showWithdraw:t.showWithdraw,showPayback:t.showPayback,showGenerate:t.showGenerate,showDeposit:t.showDeposit,migrateCdp:t.migrateCdpExternal}})],1)},i=[],r=(a("a4d3"),a("99af"),a("4de4"),a("caad"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("25f0"),a("2532"),a("3ca3"),a("159b"),a("ddb0"),a("d0ff")),s=(a("96cf"),a("c964")),o=a("fc11"),c=a("2f62"),u=a("572c"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.close-title"),centered:"",static:"",lazy:"","hide-footer":""}},[a("div",{staticClass:"contents"},[t.enoughMkr?t._e():a("div",{staticClass:"message-container"},[t._v(" "+t._s(t.$t("dappsMaker.not-enough-mkr-close"))+" ")]),t.enoughDai?t._e():a("div",{staticClass:"message-container"},[t._v(" "+t._s(t.$t("dappsMaker.not-enough-dai-close"))+" ")]),a("p",{staticClass:"top-text"},[t._v(" "+t._s(t.$t("dappsMaker.closing-notice"))+" ")]),a("div",{staticClass:"value-table-container"},[a("div",{staticClass:"value-table mkr-balance"},[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.mkr-balance")))])]),a("p",[a("b",[t._v(t._s(t.mkrBalance)+" "+t._s(t.$t("dappsMaker.mkr")))])])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.enoughMkr,expression:"!enoughMkr"}],staticClass:"get-mkr",on:{click:function(e){return t.getMkr()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-mkr"))+" ")])]),a("div",{staticClass:"value-table mkr-balance"},[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.dai-balance")))])]),a("p",[a("b",[t._v(t._s(t.daiBalance)+" "+t._s(t.$t("dappsMaker.dai")))])])]),a("p",{directives:[{name:"show",rawName:"v-show",value:!t.enoughDai,expression:"!enoughDai"}],staticClass:"get-mkr",on:{click:function(e){return t.getDai()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-dai"))+" ")])]),a("div",{staticClass:"value-table other-values"},[a("div",{staticClass:"value-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.outstanding-dai")))]),a("p",[a("b",[t._v(t._s(t.values.debtValue)+" "+t._s(t.$t("dappsMaker.dai")))])])]),a("div",{staticClass:"value-block"},[a("p",[t._v(" "+t._s(t.$t("dappsMaker.stability-fee-in-mkr",{value:t.displayFixedValue(t.displayPercentValue(t.values.stabilityFee))}))+" ")]),a("p",[a("b",[t._v(t._s(t.getfeeOwed)+" "+t._s(t.$t("dappsMaker.mkr")))])])])])]),a("div",{staticClass:"buttons"},[t.needsDaiApprove?a("div",[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.approve-dai"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.approveDai}})],1):t._e(),t.needsMkrApprove?a("div",[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.approve-maker"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.approveMkr}})],1):t._e()]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("common.close"),buttonStyle:"green",fullWidth:!0,noMinWidth:!0},"button-disabled":!t.canClose,"click-function":t.closeCdp}})],1),a("help-center-button")],1)])],1)},d=[],h=(a("7db0"),a("b680"),a("a8f0")),p=a("76ed"),m=a("901e"),f=a.n(m);function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b=function(t){return new f.a(t)},g={components:{"help-center-button":p["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},makerManager:{type:Object,default:function(){return{}}}},data:function(){return{amount:0,amountEth:0,amountDai:0,govFee:0,closable:!1,modalDetailInformation:!1,textValues:{},mkrToken:{},daiToken:{},cancelButton:{title:"Cancel",buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},closeButton:{title:"Close",buttonStyle:"green",fullWidth:!0,noMinWidth:!0},suppliedFrom:{symbol:"ETH",name:"Ethereum"},suppliedTo:{symbol:"MKR",name:"Maker"},suppliedToAmount:0,destAddress:""}},computed:y({},Object(c["c"])("main",["account","gasPrice","web3","network","ens"]),{getfeeOwed:function(){var t=this.values.governanceFeeOwed;return this.displayFixedValue(t,8)},newCollateralRatio:function(){return this.values?this.values.collatRatio:0},newCollateralRatioSafe:function(){return!this.values||b(this.values.collatRatio).gte(2)},newLiquidationPrice:function(){return this.values?this.values.liquidationPrice:0},mkrBalance:function(){return this.mkrToken?this.mkrToken.balance:0},daiBalance:function(){return this.daiToken?this.daiToken.balance:0},enoughMkr:function(){var t=this.values.governanceFeeOwed;return!!t&&b(this.mkrBalance).minus(t).gte(0)},enoughDai:function(){if(this.values.zeroDebt)return!0;var t=this.values.debtValue;return!!t&&b(this.daiBalance).minus(t).gte(0)},needsDaiApprove:function(){return!(!b(this.values.proxyAllowanceDai).gt(0)||!b(this.values.proxyAllowanceDai).lte(this.values.debtValue))||b(this.values.proxyAllowanceDai).eq(0)},needsMkrApprove:function(){return!(!b(this.values.proxyAllowanceMkr).gt(0)||!b(this.values.proxyAllowanceMkr).lt(this.values.governanceFeeOwed))||b(this.values.proxyAllowanceMkr).eq(0)},canClose:function(){return this.enoughMkr&&this.enoughDai&&!this.needsDaiApprove&&!this.needsMkrApprove}}),watch:{tokensWithBalance:function(){this.getBalances()}},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.destAddress=this.account.address,this.getBalances(),this.$refs.modal.$on("shown",Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.getBalances();case 1:case"end":return t.stop()}}),t)}))));case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)},closeCdp:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.delayCloseModal(),this.$emit("closeCdp");case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),displayPercentValue:function(t){return f.a.isBigNumber(t)||(t=new f.a(t)),t.times(100).toString()},displayFixedValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return f.a.isBigNumber(t)||(t=new f.a(t)),t.toFixed(e,f.a.ROUND_DOWN).toString()},maxDai:function(){this.amount=this.values.maxDai},currentDai:function(){this.amount=this.values.debtValue},getBalances:function(){this.mkrToken=this.tokensWithBalance.find((function(t){return"MKR"===t.symbol})),this.daiToken=this.tokensWithBalance.find((function(t){return"DAI"===t.symbol}))},getMkr:function(){var t=this,e=this.getfeeOwed;b(this.mkrBalance).lt(e)&&(this.suppliedToAmount=b(e).minus(b(this.mkrBalance)).plus(b(e).times(.01)).toNumber(),b(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"MKR",name:"Maker"},this.$nextTick((function(){t.$refs.swapWidget.$refs.modal.show()})))},getDai:function(){var t=this.values.debtValue;b(this.daiBalance).lt(t)&&(this.suppliedToAmount=b(t).minus(b(this.daiBalance)).toNumber(),b(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"DAI",name:"Dai"},this.$eventHub.$emit("showSwapWidgetTo",this.account.address,this.suppliedFrom,this.suppliedTo,this.suppliedToAmount))},approveDai:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("approveDai");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),approveMkr:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("approveMkr");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},k=g,x=(a("b459"),a("2877")),C=Object(x["a"])(k,l,d,!1,null,"3d51ce30",null),w=C.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.move-title"),"hide-footer":"",centered:"",static:"",lazy:""}},[a("div",{staticClass:"modal-content"},[a("p",{staticClass:"top-text"},[t._v(" "+t._s(t.$t("dappsMaker.move-notice"))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}])}),a("div",{staticClass:"input-container"},[a("label",[t._v(t._s(t.$t("dappsMaker.move-question")))]),a("div",{staticClass:"input-box"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}})])]),a("div",[t.destAddressHasProxy?a("div",[a("p",[t._v(" "+t._s(t.$t("dappsMaker.proxy-address",{value:t.destAddressProxy}))+" ")]),t._v(" "+t._s(t.$t("dappsMaker.move-with-proxy"))+" ")]):t._e(),t.destAddressHasProxy?t._e():a("div",[t._v(" "+t._s(t.$t("dappsMaker.move-without-proxy"))+" ")])]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("common.submit"),buttonStyle:"green",noMinWidth:!0,fullWidth:!0},"button-disabled":!t.btnActive,"click-function":t.moveCdp}})],1),a("help-center-button")],1)])],1)},_=[],D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"check-box"},[a("label",{staticClass:"check-box-container"},[a("input",{attrs:{type:"checkbox"},on:{click:t.checkBoxClicked}}),a("span",{staticClass:"checkmark"}),t._t("terms")],2)])},R=[],M={data:function(){return{checkboxChecked:!1}},methods:{checkBoxClicked:function(){this.checkboxChecked=!this.checkboxChecked,this.$emit("changeStatus",this.checkboxChecked)}}},O=M,A=(a("7c0e"),Object(x["a"])(O,D,R,!1,null,"74d90e30",null)),$=A.exports,j=a("ce96");function S(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function E(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?S(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):S(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var B={components:{"check-box":$,"help-center-button":p["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},destAddressHasProxy:{type:Boolean,default:!1},destAddressProxy:{type:String,default:""}},data:function(){return{address:"",amountEth:0,amountDai:0,govFee:0,modalDetailInformation:!1,checkBoxChecked:!1,textValues:{},mkrToken:{}}},computed:E({},Object(c["c"])("main",["account","gasPrice","web3","network","ens"]),{btnActive:function(){return j["d"].isValidETHAddress(this.address)&&this.checkBoxChecked}}),watch:{address:function(t){j["d"].isValidETHAddress(t)&&this.$emit("checkForProxy",t)}},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.address=""}))},methods:{closeCdp:function(){this.activeCdp.closeCdp()},checkBoxClicked:function(){this.checkBoxChecked=!this.checkBoxChecked},displayPercentValue:function(t){return f.a.isBigNumber(t)||(t=new f.a(t)),t.times(100).toString()},displayFixedValue:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;return f.a.isBigNumber(t)||(t=new f.a(t)),t.toFixed(e,f.a.ROUND_DOWN).toString()},moveCdp:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:j["d"].isValidETHAddress(this.address)&&(this.$emit("moveCdp",this.address),this.closeModal());case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeModal:function(){this.$refs.modal.hide()}}},V=B,q=(a("f09a"),Object(x["a"])(V,P,_,!1,null,"62b4dd78",null)),T=q.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.generate-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"contents"},[a("div",{staticClass:"inputs"},[a("div",{staticClass:"interface__block-title"},[t._v(" "+t._s(t.$t("dappsMaker.generate-question"))+" ")]),a("div",{staticClass:"top-buttons"},[a("p",{staticClass:"total"},[a("span",[t._v(t._s(t.$t("dappsMaker.total")))]),t._v(" "+t._s(t.newTotal)+" "+t._s(t.$t("dappsMaker.dai"))+" ")]),a("p",{staticClass:"max",on:{click:t.maxDai}},[t._v(" "+t._s(t.$t("dappsMaker.max-available"))+" ")])]),a("div",{class:["input-box",t.allOk?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("p",{staticClass:"input-unit"},[t._v(t._s(t.$t("dappsMaker.dai")))])]),a("div",{staticClass:"sub-text"},[t.canGenerateDaiAmount?t._e():a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.above-max-dai"))+" ")]),a("p",[t._v(" "+t._s(t.$t("dappsMaker.collateral-ratio-val",{value:t.newCollateralRatio}))+" ")])])]),a("expanding-option",{attrs:{title:"Details"}},[a("div",{staticClass:"detail-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.max-generate-available")))]),a("p",[a("b",[t._v(" "+t._s(t.values.maxDai?t.displayFixedValue(t.values.maxDai):0)+" ")]),t._v(" "+t._s(t.$t("dappsMaker.dai"))+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.newCollateralRatio)+"%")])])])])]),!t.newCollateralRatioSafe&&t.notZero(t.amount)?a("div",{staticClass:"warning-confirmation"},[a("div",{staticClass:"grid-block"},[a("div",{staticClass:"sign"},[t._v("⚠️")]),a("div",{staticClass:"text-content"},[a("p",{staticClass:"title"},[t._v(t._s(t.$t("dappsMaker.caution")))]),a("p",{staticClass:"warning-details"},[t._v(" "+t._s(t.$t("dappsMaker.liquidation-risk",{value:t.newCollateralRatio}))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}],null,!1,196307094)})],1)])]):t._e(),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.generate"),buttonStyle:"green",noMinWidth:!0},"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},W=[],I=a("70c1"),U=a.n(I),N=a("1768"),L=a("c16c");function H(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function z(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?H(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):H(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var G=function(t){return new f.a(t)},K={components:{"help-center-button":p["a"],"check-box":$,"expanding-option":N["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH"}},computed:z({},Object(c["c"])("main",["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!G(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},allOk:function(){return!this.amountPresent||this.newCollateralRatioSafe&&this.canGenerateDaiAmount},showWarning:function(){return!this.newCollateralRatioInvalid&&this.canGenerateDaiAmount&&this.riskyBypass},newTotal:function(){return G(this.values.debtValue).plus(this.amount)},hasEnoughEth:function(){if(this.canCompute){var t=U.a.fromWei(this.account.balance,"ether");return G(this.amount).lte(G(t))}return!0},canGenerateDaiAmount:function(){return!(this.canCompute&&!G(this.amount).isNaN())||G(this.amount).lte(G(this.values.maxDai))},canProceed:function(){return!!this.canCompute&&(!G(this.amount).lte(0)&&(this.newCollateralRatioSafe&&this.canGenerateDaiAmount||!this.newCollateralRatioInvalid&&this.canGenerateDaiAmount&&this.riskyBypass))},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(G(this.values.debtValue).plus(this.amount)):this.values?this.values.collateralRatio:0},newCollateralRatio:function(){return this.canCompute||this.values?this.displayFixedPercent(this.calcCollateralRatio):"--"},newCollateralRatioSafe:function(){return!this.canCompute||this.calcCollateralRatio.gte(2)},newCollateralRatioInvalid:function(){return!this.canCompute||this.calcCollateralRatio.lte(1.5)},newLiquidationPrice:function(){return this.canCompute?this.calcLiquidationPriceDaiChg(G(this.values.debtValue).plus(this.amount)):this.values?this.values.liquidationPrice:0}}),methods:{submitBtn:function(){this.canProceed&&this.drawDai()},checkBoxClicked:function(t){this.riskyBypass=t},displayPercentValue:L["e"],displayFixedValue:L["d"],displayFixedPercent:L["c"],notZero:function(t){return G(t).gt(0)},maxDai:function(){this.amount=G(this.values.maxDai).minus(G(this.values.maxDai).times(.01)),this.$forceUpdate()},currentDai:function(){this.amount=this.values.debtValue},drawDai:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:G(this.amount).gte(0)&&(this.delayCloseModal(),this.newCollateralRatioSafe?this.$emit("drawDai",[this.amount,null]):this.$emit("drawDai",[this.amount,this.riskyBypass]));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},Q=K,Z=(a("9441"),Object(x["a"])(Q,F,W,!1,null,"10604b53",null)),J=Z.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.deposit-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"modal-content-container"},[a("div",{staticClass:"inputs-container"},[a("div",{staticClass:"input-container"},[a("div",{staticClass:"interface__block-title"},[t._v(" "+t._s(t.$t("dappsMaker.deposit-question"))+" ")]),a("div",{class:["input-box",t.hasEnoughEth?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("span",{staticClass:"input-unit"},[t._v(t._s(t.digitalCurrency))])]),a("div",{staticClass:"sub-text"},[t.hasEnoughEth?t._e():a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.notEnoughEth"))+" ")]),a("div",{staticClass:"peth"},[a("p",[t._v(" "+t._s(t.values.toPeth?t.displayFixedValue(t.values.toPeth(t.amount),5,!1):0)+" "+t._s(t.$t("common.currency.peth"))+" ")]),a("popover",{attrs:{popcontent:t.$t("dappsMaker.peth-popover")}})],1)])])]),a("div",{staticClass:"detail-info"},[a("div",{staticClass:"info"},[a("h4",[t._v(t._s(t.$t("dappsMaker.detail-info")))]),a("div",{staticClass:"sliding-switch-white"},[a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox"},on:{click:function(e){t.modalDetailInformation=!t.modalDetailInformation}}}),a("span",{staticClass:"slider round"})])])]),a("div",{staticClass:"expended-info",class:t.modalDetailInformation&&"expended-info-open"},[a("div",{staticClass:"padding-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.currently-deposited")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.values.ethCollateral,5)))]),t._v(" "+t._s(t.digitalCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])])]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.cancel"),buttonStyle:"green-border",noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.submit"),buttonStyle:"green",noMinWidth:!0},"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},X=[];function tt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function et(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?tt(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):tt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var at=function(t){return new f.a(t)},nt={components:{"help-center-button":p["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH"}},computed:et({},Object(c["c"])("main",["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!at(this.amount).lte(0)},hasEnoughEth:function(){if(this.amount||""!==this.amount){var t=U.a.fromWei(this.account.balance,"ether");return at(this.amount).lte(at(t))}return!0},canWithdrawEthAmount:function(){return!(!this.amount&&""===this.amount)&&at(this.amount).lte(at(this.values.ethCollateral))},canProceed:function(){if(at(this.amount).lte(0))return!1;var t=at(this.newCollateralRatio),e=t.gt(1.5)||t.eq(0);return this.hasEnoughEth&&(e||this.riskyBypass)},newCollateralRatio:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(at(this.values.ethCollateral).plus(this.amount)):this.values?this.values.collatRatio:0},newCollateralRatioSafe:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(at(this.values.ethCollateral).plus(this.amount)).gte(2):!this.values||at(this.values.collatRatio).gte(2)},newCollateralRatioInvalid:function(){return this.values&&this.amount>0?this.calcCollatRatioEthChg(at(this.values.ethCollateral).plus(this.amount)).lte(1.5):!this.values||at(this.values.collatRatio).lte(1.5)},newLiquidationPrice:function(){return this.values&&this.amount>0?this.calcLiquidationPriceEthChg(at(this.values.ethCollateral).plus(at(this.amount))):this.values?this.values.liquidationPrice:0}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0}))},methods:{submitBtn:function(){this.canProceed&&this.lockEth()},checkBoxClicked:function(){this.riskyBypass=!this.riskyBypass},displayPercentValue:L["e"],displayFixedValue:L["d"],notZero:function(t){return at(t).gt(0)},currentDai:function(){this.amount=this.values.debtValue},lockEth:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:at(this.amount).gte(0)&&(this.delayCloseModal(),this.$emit("lockEth",this.amount));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},it=nt,rt=(a("394f"),Object(x["a"])(it,Y,X,!1,null,"64b38325",null)),st=rt.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.withdraw-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"modal-content-container"},[a("div",{staticClass:"inputs-container"},[a("div",{staticClass:"input-container"},[a("p",{staticClass:"message"},[t._v(" "+t._s(t.$t("dappsMaker.withdraw-notice"))+" ")]),a("label",[t._v(" "+t._s(t.$t("dappsMaker.withdraw-question")))]),a("div",{staticClass:"top-buttons"},[a("p",{staticClass:"max-withdraw",on:{click:t.maxWithdraw}},[t._v(" "+t._s(t.$t("dappsMaker.max-available"))+" ")])]),a("div",{class:["input-box",t.newCollateralRatioSafe?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("span",{staticClass:"input-unit"},[t._v(t._s(t.digitalCurrency))])]),a("div",{staticClass:"sub-text"},[t.canWithdrawEthNotice?a("p",{staticClass:"above-max"},[t._v(" "+t._s(t.$t("dappsMaker.over-max-withdraw"))+" ")]):t._e(),a("div",{staticClass:"peth"},[a("p",{staticClass:"peth-value"},[t._v(" "+t._s(t.values.toPeth?t.displayFixedValue(t.values.toPeth(t.amount),5,!1):0)+" "+t._s(t.$t("dappsMaker.peth"))+" ")]),a("popover",{attrs:{popcontent:t.$t("dappsMaker.peth-popover")}})],1)])])]),a("expanding-option",{attrs:{title:"Detail Information"}},[a("div",{staticClass:"padding-container"},[a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.max-available")))]),a("p",[a("b",[t._v(t._s(t.values.maxDai?t.displayFixedValue(t.values.maxEthDraw,5):0))]),t._v(" "+t._s(t.digitalCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("div",{staticClass:"grid-block"},[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])]),!t.newCollateralRatioSafe&&t.notZero(t.amount)?a("div",{staticClass:"warning-confirmation"},[a("div",{staticClass:"grid-block"},[a("div",{staticClass:"sign"},[t._v("⚠️")]),a("div",{staticClass:"text-content"},[a("p",{staticClass:"title"},[t._v(t._s(t.$t("dappsMaker.caution")))]),a("p",{staticClass:"warning-details"},[t._v(" "+t._s(t.$t("dappsMaker.liquidation-risk",{value:t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio))}))+" ")]),a("check-box",{on:{changeStatus:t.checkBoxClicked},scopedSlots:t._u([{key:"terms",fn:function(){return[a("p",{staticClass:"checkbox-label"},[t._v(" "+t._s(t.$t("dappsMaker.understand-and-agree"))+" ")])]},proxy:!0}],null,!1,196307094)})],1)])]):t._e(),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",noMinWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("common.submit"),buttonStyle:"green",noMinWidth:!0},"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},ct=[];function ut(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function lt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?ut(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):ut(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var dt=function(t){return new f.a(t)},ht={components:{"help-center-button":p["a"],"check-box":$,"expanding-option":N["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH"}},computed:lt({},Object(c["c"])("main",["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!dt(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},canWithdrawEthNotice:function(){return!!this.amountPresent&&!dt(this.amount).lte(dt(this.values.maxEthDraw))},canWithdrawEthAmount:function(){return!!this.amountPresent&&dt(this.amount).lte(dt(this.values.ethCollateral))},canProceed:function(){return!!this.amountPresent&&(!dt(this.amount).lte(0)&&(this.newCollateralRatioSafe&&this.canWithdrawEthAmount||!this.newCollateralRatioInvalid&&this.canWithdrawEthAmount&&this.riskyBypass))},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(dt(this.values.debtValue).plus(this.amount)):this.values?this.values.collateralRatio:0},newCollateralRatio:function(){return this.canCompute?this.calcCollatRatioEthChg(dt(this.values.ethCollateral).minus(this.amount)):this.values?this.values.collatRatio:"--"},newCollateralRatioSafe:function(){return!this.canCompute||(!!this.values.zeroDebt||this.newCollateralRatio.gte(2))},newCollateralRatioInvalid:function(){return!this.canCompute||!this.values.zeroDebt&&this.newCollateralRatio.lte(1.5)},newLiquidationPrice:function(){return this.canCompute?this.calcLiquidationPriceEthChg(dt(this.values.ethCollateral).minus(this.amount)):this.values?this.values.liquidationPrice:0}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0})),this.$refs.modal.$on("hidden",(function(){t.amount=0}))},methods:{submitBtn:function(){this.canProceed&&this.freeEth()},checkBoxClicked:function(t){this.riskyBypass=t},displayPercentValue:L["e"],displayFixedValue:L["d"],notZero:function(t){return dt(t).gt(0)},maxWithdraw:function(){this.amount=this.values.maxEthDraw,this.$forceUpdate()},currentDai:function(){this.amount=this.values.debtValue},freeEth:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:dt(this.amount).gte(0)&&(this.delayCloseModal(),this.newCollateralRatioSafe?this.$emit("freeEth",[this.amount,null]):this.$emit("freeEth",[this.amount,this.riskyBypass]));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)}}},pt=ht,mt=(a("130b"),Object(x["a"])(pt,ot,ct,!1,null,"1738db86",null)),ft=mt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-container"},[a("b-modal",{ref:"modal",staticClass:"bootstrap-modal nopadding",attrs:{title:t.$t("dappsMaker.payback-title"),centered:"","hide-footer":"",static:"",lazy:""}},[a("div",{staticClass:"contents"},[a("p",{staticClass:"top-message"},[t._v(" "+t._s(t.$t("dappsMaker.payback-notice"))+" ")]),t.hasEnoughMkr?t._e():a("div",[a("div",{staticClass:"value-block"},[a("p",[a("b",[t._v(t._s(t.$t("dappsMaker.mkr-balance")))])]),a("p",[a("b",[t._v(t._s(t.mkrBalance)+" "+t._s(t.$t("dappsMaker.mkr")))])])]),a("p",{staticClass:"get-mkr",on:{click:function(e){return t.getMkr()}}},[t._v(" "+t._s(t.$t("dappsMaker.get-mkr"))+" ")])]),a("div",{staticClass:"input-container"},[a("div",{staticClass:"top-buttons"},[a("p",{on:{click:t.currentDai}},[t._v(t._s(t.$t("dappsMaker.max-available")))])]),a("div",{class:["dai-amount",t.hasEnoughDai?"":"danger"]},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],domProps:{value:t.amount},on:{input:function(e){e.target.composing||(t.amount=e.target.value)}}}),a("p",{staticClass:"floating-text"},[t._v(t._s(t.$t("dappsMaker.dai")))])])]),a("expanding-option",{attrs:{title:"Detail Information"}},[a("ul",{staticClass:"details"},[a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.outstanding-dai")))]),a("p",[a("b",[t._v(t._s(t.values.debtValue?t.displayFixedValue(t.values.debtValue,3):0))]),t._v(" "+t._s(t.$t("dappsMaker.dai"))+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.stability-fee-owed")))]),a("p",[a("b",[t._v(t._s(t.values.governanceFeeOwed))]),t._v(" "+t._s(t.$t("dappsMaker.mkr"))+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.projected-liquidation")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.newLiquidationPrice,2)))]),t._v(" "+t._s(t.fiatCurrency)+" ")])]),a("li",[a("p",[t._v(t._s(t.$t("dappsMaker.projected-collat-ratio")))]),a("p",[a("b",[t._v(t._s(t.displayFixedValue(t.displayPercentValue(t.newCollateralRatio),3))+"%")])])])])]),a("div",{staticClass:"buttons"},[t.needsDaiApprove?a("div",[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.approve-dai"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.approveDai}})],1):t._e(),t.needsMkrApprove?a("div",[a("standard-button",{attrs:{options:{title:t.$t("dappsMaker.approve-maker"),buttonStyle:"green-border",fullWidth:!0,noMinWidth:!0},"click-function":t.approveMkr}})],1):t._e()]),a("div",{staticClass:"buttons"},[a("standard-button",{attrs:{options:{title:t.$t("common.cancel"),buttonStyle:"green-border",noMinWidth:!0,fullWidth:!0},"click-function":t.closeModal}}),a("standard-button",{attrs:{options:{title:t.$t("common.submit"),buttonStyle:"green",noMinWidth:!0,fullWidth:!0},"button-disabled":!t.canProceed,"click-function":t.submitBtn}})],1),a("help-center-button")],1)])],1)},yt=[];function bt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function gt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?bt(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):bt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var kt=function(t){return new f.a(t)},xt={components:{"help-center-button":p["a"],"expanding-option":N["a"],"standard-button":h["a"]},props:{tokensWithBalance:{type:Array,default:function(){return[]}},action:{type:String,default:""},values:{type:Object,default:function(){return{maxPethDraw:"",maxEthDraw:"",maxUsdDraw:"",ethCollateral:"",pethCollateral:"",usdCollateral:"",debtValue:"",maxDai:"",collateralRatio:"",cdpId:""}}},calcCollatRatioEthChg:{type:Function,default:function(){}},calcLiquidationPriceEthChg:{type:Function,default:function(){}},calcCollatRatioDaiChg:{type:Function,default:function(){}},calcLiquidationPriceDaiChg:{type:Function,default:function(){}}},data:function(){return{amount:0,amountEth:0,amountDai:0,mkrToken:{},daiToken:{},riskyBypass:!1,modalDetailInformation:!1,textValues:{},fiatCurrency:"USD",digitalCurrency:"ETH",suppliedFrom:{symbol:"ETH",name:"Ethereum"},suppliedTo:{symbol:"MKR",name:"Maker"},suppliedToAmount:0,destAddress:""}},computed:gt({},Object(c["c"])("main",["account","gasPrice","web3","network","ens"]),{amountPresent:function(){return(this.amount||""!==this.amount)&&!kt(this.amount).lte(0)},canCompute:function(){return this.values&&this.amountPresent},allOk:function(){return!this.amountPresent||this.newCollateralRatioSafe&&this.canGenerateDaiAmount},hasEnoughEth:function(){if(this.canCompute){var t=U.a.fromWei(this.account.balance,"ether");return kt(this.amount).lte(kt(t))}return!0},paybackFee:function(){return this.canCompute?kt(this.amount).div(this.values.debtValue).times(this.values.governanceFeeOwed):0},hasEnoughMkr:function(){return!this.canCompute||kt(this.mkrBalance).gte(kt(this.paybackFee))},hasEnoughDai:function(){return!this.canCompute||kt(this.amount).lte(kt(this.daiBalance))},canWithdrawEthAmount:function(){return!!this.canCompute&&kt(this.amount).lte(kt(this.values.ethCollateral))},canGenerateDaiAmount:function(){return!this.canCompute||kt(this.amount).lte(kt(this.values.maxDai))},canProceed:function(){return this.hasEnoughDai},calcCollateralRatio:function(){return this.canCompute?this.calcCollatRatioDaiChg(kt(this.values.debtValue).minus(this.amount)):this.values?this.values.collateralRatio:"--"},newCollateralRatio:function(){return this.amount>0?this.calcCollateralRatio:this.values?this.values.collatRatio:"--"},newCollateralRatioSafe:function(){return this.amount>0?!!this.calcCollateralRatio.lte(new f.a(9e-6))||this.calcCollateralRatio.gte(2):!this.values||kt(this.values.collatRatio).gte(2)},newCollateralRatioInvalid:function(){return this.amount>0?!!this.calcCollateralRatio.lte(new f.a(9e-6))||this.calcCollateralRatio.gte(1.5):!this.values||kt(this.values.collatRatio).lte(1.5)},newLiquidationPrice:function(){return this.values.debtValue&&this.amount>0?this.calcLiquidationPriceDaiChg(kt(this.values.debtValue).minus(this.amount)):this.values.liquidationPrice?this.values.liquidationPrice:0},mkrBalance:function(){return this.mkrToken?this.mkrToken.balance:0},daiBalance:function(){return this.daiToken?this.daiToken.balance:0},needsDaiApprove:function(){return!(!kt(this.values.proxyAllowanceDai).gt(0)||!kt(this.values.proxyAllowanceDai).lt(this.values.debtValue))||kt(this.values.proxyAllowanceDai).eq(0)},needsMkrApprove:function(){return!(!kt(this.values.proxyAllowanceMkr).gt(0)||!kt(this.values.proxyAllowanceMkr).lt(this.values.governanceFeeOwed))||kt(this.values.proxyAllowanceMkr).eq(0)}}),watch:{},mounted:function(){var t=this;this.$refs.modal.$on("shown",(function(){t.amount=0,t.getBalances()}))},methods:{submitBtn:function(){this.canProceed&&this.wipeDai()},checkBoxClicked:function(){this.riskyBypass=!this.riskyBypass},displayPercentValue:L["e"],displayFixedValue:L["d"],notZero:function(t){return kt(t).gt(0)},maxDai:function(){this.amount=kt(this.values.maxDai).minus(kt(this.values.maxDai).times(.01))},currentDai:function(){this.amount=this.values.debtValue},wipeDai:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:kt(this.amount).gte(0)&&(this.delayCloseModal(),kt(this.amount).gt(this.values.debtValue)?this.$emit("wipeDai",this.values.debtValue):this.$emit("wipeDai",this.amount));case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBalances:function(){this.mkrToken=this.tokensWithBalance.find((function(t){return"MKR"===t.symbol})),this.daiToken=this.tokensWithBalance.find((function(t){return"SAI"===t.symbol}))},getMkr:function(){var t=this.paybackFee;kt(this.mkrBalance).lt(t)&&(this.suppliedToAmount=kt(t).minus(kt(this.mkrBalance)).plus(kt(t).times(.01)).toNumber(),kt(this.suppliedToAmount).lt(1e-6)&&(this.suppliedToAmount=1e-6),this.suppliedFrom={symbol:"ETH",name:"Ethereum"},this.suppliedTo={symbol:"MKR",name:"Maker"},this.$eventHub.$emit("showSwapWidgetTo",this.account.address,this.suppliedFrom,this.suppliedTo,this.suppliedToAmount))},closeModal:function(){this.$refs.modal.hide()},delayCloseModal:function(){var t=this;setTimeout((function(){t.closeModal()}),200)},approveDai:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("approveDai");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),approveMkr:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.$emit("approveMkr");case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},Ct=xt,wt=(a("d4e0"),Object(x["a"])(Ct,vt,yt,!1,null,"aba123ba",null)),Pt=wt.exports,_t=a("a7ac"),Dt=a.n(_t),Rt=a("276c"),Mt=a("e954"),Ot=a("9c3d"),At=a("5e71");a("a15b"),a("fb6a"),a("ace4"),a("e25e"),a("ac1f"),a("466d"),a("5cc6"),a("9a8c"),a("a975"),a("735e"),a("c1ac"),a("d139"),a("3a7b"),a("d5d6"),a("82f8"),a("e91f"),a("60bd"),a("5f96"),a("3280"),a("3fcc"),a("ca91"),a("25a1"),a("cd26"),a("3c5d"),a("2954"),a("649e"),a("219c"),a("170b"),a("b39a"),a("72f7");function $t(t){return t.slice?t:(t.slice=function(){var e=Array.prototype.slice.call(arguments);return new Uint8Array(Array.prototype.slice.apply(t,e))},t)}function jt(t){if(!t||parseInt(t.length)!=t.length||"string"===typeof t)return!1;for(var e=0;e<t.length;e++){var a=t[e];if(a<0||a>=256||parseInt(a)!=a)return!1}return!0}function St(t){if(t&&t.toHexString&&(t=t.toHexString()),Bt(t)){t=t.substring(2),t.length%2&&(t="0"+t);for(var e=[],a=0;a<t.length;a+=2)e.push(parseInt(t.substr(a,2),16));return $t(new Uint8Array(e))}if(jt(t))return $t(new Uint8Array(t))}function Et(t,e){if(t=St(t),e<t.length)throw new Error("cannot pad");var a=new Uint8Array(e);return a.set(t,e-t.length),$t(a)}function Bt(t,e){return!("string"!==typeof t||!t.match(/^0x[0-9A-Fa-f]*$/))&&(!e||t.length===2+2*e)}var Vt="0123456789abcdef";function qt(t){if(t&&t.toHexString)return t.toHexString();if("number"===typeof t){var e="";while(t)e=Vt[15&t]+e,t=parseInt(t/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if(Bt(t))return t.length%2&&(t="0x0"+t.substring(2)),t;if(jt(t)){for(var a=[],n=0;n<t.length;n++){var i=t[n];a.push(Vt[(240&i)>>4]+Vt[15&i])}return"0x"+a.join("")}}var Tt=a("ce3b"),Ft=Dt.a.MKR,Wt=Dt.a.DAI,It=Dt.a.ETH,Ut=function(t){return new f.a(t)},Nt=function(){function t(e,a,n,i){Object(Rt["a"])(this,t),this.cdpId=e,this.cdp={},this.web3=a||{},this.ready=!1,this.doUpdate=0,this.cdps=[],this.noProxy=i.noProxy||!1,this.services=n||null,this.needsUpdate=!1,this.closing=!1,this.opening=!1,this.migrated=!1,this.migrateCdpActive=!1,this.migrateCdpStage=0,this._liqPrice=Ut(0),this.isSafe=!1,this.debtValue=Ut(0),this._collatRatio=0,this.ethCollateral=Ut(0),this.pethCollateral=Ut(0),this._usdCollateral=Ut(0),this._governanceFee=Ut(0)}return Object(Mt["a"])(t,[{key:"init",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:this.cdpId,t.next=3,this.updateValues(e);case 3:return t.next=5,this.cdpService.getGovernanceFee(this.cdpId,Ft);case 5:return this._governanceFee=t.sent.toBigNumber(),this.ready=!0,t.abrupt("return",this);case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"updateValues",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=n.length>0&&void 0!==n[0]?n[0]:this.cdpId;try{this.byte32Id=qt(Et(this.web3.utils.numberToHex(this.cdpId),32))}catch(i){console.error(i)}return t.next=4,this.services.getProxy();case 4:if(this._proxyAddress=t.sent,this.noProxy=null===this._proxyAddress,!this._proxyAddress){t.next=12;break}return t.next=9,this.services.getCdp(e,this._proxyAddress);case 9:this.cdp=t.sent,t.next=15;break;case 12:return t.next=14,this.services.getCdp(e,!1);case 14:this.cdp=t.sent;case 15:return t.next=17,this.cdp.getLiquidationPrice();case 17:return a=t.sent,this._liqPrice=a.toBigNumber().toFixed(2),t.next=21,this.cdp.isSafe();case 21:return this.isSafe=t.sent,t.next=24,this.cdp.getDebtValue();case 24:return this.debtValue=t.sent.toBigNumber(),t.next=27,this.cdp.getCollateralizationRatio();case 27:return this._collatRatio=t.sent,t.next=30,this.cdp.getCollateralValue();case 30:return this.ethCollateral=t.sent.toBigNumber(),t.next=33,this.cdp.getCollateralValue(Dt.a.PETH);case 33:return this.pethCollateral=t.sent.toBigNumber(),t.next=36,this.cdp.getCollateralValue(Dt.a.USD);case 36:this._usdCollateral=t.sent.toBigNumber();case 37:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"update",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.migrated){t.next=8;break}return t.next=3,this.proxyService.currentProxy();case 3:if(e=t.sent,!e){t.next=8;break}return this.migrated=!1,t.next=8,this.cdpService.give(this.cdpId,this._proxyAddress);case 8:if(!this.needsUpdate){t.next=15;break}return this.opening=!1,this.needsUpdate=!1,t.next=13,this.updateValues(this.cdpId);case 13:return this.doUpdate++,t.abrupt("return",this);case 15:return t.abrupt("return",this);case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getProxy",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.services.getProxy();case 2:this._proxyAddress=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"migrateCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:if(e=t.sent,e){t.next=10;break}return this.needsUpdate=!0,t.next=7,this.proxyService.ensureProxy();case 7:return t.abrupt("return",t.sent);case 10:if(!this.needToFinishMigrating){t.next=14;break}return this.needsUpdate=!0,t.next=14,this.cdpService.give(this.cdpId,this._proxyAddress);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"openCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e,a){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e<=0)){t.next=2;break}return t.abrupt("return",0);case 2:if(this.hasProxy){t.next=10;break}return this.opening=!0,this.needsUpdate=!0,t.next=7,this.cdpService.openProxyCdpLockEthAndDrawDai(e,a,null);case 7:n=t.sent,t.next=15;break;case 10:return this.opening=!0,this.needsUpdate=!0,t.next=14,this.cdpService.openProxyCdpLockEthAndDrawDai(e,a,this.proxyAddress);case 14:n=t.sent;case 15:return t.abrupt("return",n.id);case 16:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}()},{key:"lockEth",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.noProxy){t.next=3;break}return t.abrupt("return");case 3:return this.needsUpdate=!0,t.next=6,this.cdpService.lockEthProxy(this._proxyAddress,this.cdpId,e);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"drawDai",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.calcCollatRatio(this.ethCollateral,this.debtValue.plus(t)).gt(2)||e)try{if(this.noProxy)return;this.needsUpdate=!0,this.cdpService.drawDaiProxy(this._proxyAddress,this.cdpId,t)}catch(a){console.error(a)}}},{key:"freeEth",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,r,s,o,c,u,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=l.length>1&&void 0!==l[1]&&l[1],!(this.debtValue.eq(0)||this.calcCollatRatio(this.ethCollateral.minus(e),this.debtValue).gt(1.5)||a)){t.next=20;break}if(t.prev=2,!this.noProxy){t.next=5;break}return t.abrupt("return");case 5:return this.needsUpdate=!0,n={},n.ETH=Object(Tt["createCurrency"])("ETH"),i=Object(Tt["createGetCurrency"])(n),r="0x526af336d614ade5cc252a407062b8861af998f5",s=new this.web3.eth.Contract(Ot,r),o=s.methods.free(this.cdpService._tubContract().address,this.byte32Id,i(e,It).toFixed("wei")).encodeABI(),c=new this.web3.eth.Contract(At["a"],this._proxyAddress),u=c.methods.execute(r,o).encodeABI(),t.abrupt("return",this.web3.eth.sendTransaction({to:this._proxyAddress,from:this.currentAddress,data:u,gas:2e6}).catch((function(t){j["e"].responseHandler(t,j["e"].ERROR)})));case 17:t.prev=17,t.t0=t["catch"](2),console.error(t.t0);case 20:case"end":return t.stop()}}),t,this,[[2,17]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"wipeDai",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,!this.noProxy){t.next=3;break}return t.abrupt("return");case 3:return this.needsUpdate=!0,t.next=6,this.cdpService.wipeDaiProxy(this._proxyAddress,this.cdpId,e);case 6:t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(e){return t.apply(this,arguments)}return e}()},{key:"canCloseCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=this.debtValue.toNumber(),t.next=3,this.cdpService.enoughMkrToWipe(this.cdpId,e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"closeCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,this.needsUpdate=!0,this.closing=!0,!this.hasProxy){t.next=6;break}return t.next=6,this.cdpService.shutProxy(this._proxyAddress,this.cdpId);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("closeCdp Error:"),console.error(t.t0);case 12:case"end":return t.stop()}}),t,this,[[0,8]])})));function e(){return t.apply(this,arguments)}return e}()},{key:"checkIfDestAddressHasProxy",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:return t.next=4,this.proxyService.getProxyAddress(e);case 4:return a=t.sent,t.abrupt("return",a);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"moveCdp",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:return t.next=4,this.proxyService.getProxyAddress(e);case 4:if(a=t.sent,!a){t.next=12;break}return this.needsUpdate=!0,this.closing=!0,t.next=10,this.cdpService.giveProxy(this._proxyAddress,this.cdpId,a);case 10:t.next=23;break;case 12:if(this.noProxy){t.next=19;break}return this.needsUpdate=!0,this.closing=!0,t.next=17,this.cdpService.giveProxy(this._proxyAddress,this.cdpId,e);case 17:t.next=23;break;case 19:return this.needsUpdate=!0,this.closing=!0,t.next=23,this.cdpService.give(this.cdpId,e);case 23:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"enoughMkrToWipe",value:function(t){return this.cdpService.enoughMkrToWipe(t,Wt.wei)}},{key:"toUSD",value:function(t){var e=this.services.toUSD(t);return e.lt(0)?Ut(0):e}},{key:"toPeth",value:function(t){return this.services.toPeth(t)}},{key:"maxDaiDraw",value:function(){var t=Ut(this.ethPrice).times(Ut(this.ethCollateral)),e=Ut(this.debtValue).times(Ut(this.liquidationRatio));return t.minus(e).div(Ut(this.ethPrice))}},{key:"calcCollatRatio",value:function(t,e){return t<=0||e<=0?Ut(0):Object(L["a"])(this.ethPrice,t,e)}},{key:"calcLiquidationPrice",value:function(t,e){return t<=0||e<=0?Ut(0):Object(L["b"])(t,e,this.ethPrice,this.liquidationRatio)}},{key:"approveDai",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.daiToken.approveUnlimited(this.proxyAddress);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"approveMkr",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.mkrToken.approveUnlimited(this.proxyAddress);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"getDaiBalances",value:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.services.daiToken.balance();case 2:return this.daiBalance=t.sent,t.abrupt("return",this.daiBalance);case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},{key:"currentAddress",get:function(){return this.services.account.address}},{key:"liquidationPenalty",get:function(){return this.services.liquidationPenalty}},{key:"stabilityFee",get:function(){return this.services.stabilityFee}},{key:"ethPrice",get:function(){return this.services.ethPrice}},{key:"pethPrice",get:function(){return this.services._pethPrice}},{key:"wethToPethRatio",get:function(){return this.services.wethToPethRatio}},{key:"liquidationRatio",get:function(){return this.services.liquidationRatio}},{key:"proxyAddress",get:function(){return this.services._proxyAddress}},{key:"hasProxy",get:function(){return this.services.hasProxy}},{key:"proxyAllowanceDai",get:function(){return this.services.proxyAllowanceDai}},{key:"proxyAllowanceMkr",get:function(){return this.services.proxyAllowanceMkr}},{key:"daiToken",get:function(){return this.services._daiToken}},{key:"daiBalance",get:function(){return this.services.daiBalance}},{key:"mkrToken",get:function(){return this.services._mkrToken}},{key:"mkrBalance",get:function(){return this.services.mkrBalance}},{key:"proxyService",get:function(){return this.services._proxyService}},{key:"cdpService",get:function(){return this.services._cdpService}},{key:"minEth",get:function(){return this.services.minEth()}},{key:"pethMin",get:function(){return this.services.pethMin}},{key:"zeroDebt",get:function(){return Ut(this.debtValue).eq(0)}},{key:"usdCollateral",get:function(){return this.toUSD(this.ethCollateral)}},{key:"ethCollateralNum",get:function(){return this.ethCollateral.toNumber()}},{key:"collatRatio",get:function(){return this._collatRatio}},{key:"liquidationPrice",get:function(){return this._liqPrice}},{key:"governanceFeeOwed",get:function(){return this._governanceFee}},{key:"maxDai",get:function(){return this.ethPrice&&this.ethCollateral&&this.liquidationRatio&&this.debtValue?Object(L["f"])(this.ethPrice,this.ethCollateral,this.liquidationRatio.plus(.001),this.debtValue):Ut(0)}},{key:"maxEthDraw",get:function(){return this.ethPrice&&this.debtValue&&this.liquidationRatio?this.zeroDebt?Object(L["g"])(this.ethCollateral,this.liquidationRatio,this.debtValue,this.ethPrice,this.minEth.times(0)).toFixed(18):Object(L["g"])(this.ethCollateral,this.liquidationRatio,this.debtValue,this.ethPrice).toFixed(18):Ut(0)}},{key:"maxPethDraw",get:function(){return this.pethPrice&&this.pethCollateral&&this.liquidationRatio?this.zeroDebt?Object(L["h"])(this.pethCollateral,this.liquidationRatio,this.debtValue,this.pethPrice,this.pethMin.times(0)):Object(L["h"])(this.pethCollateral,this.liquidationRatio,this.debtValue,this.pethPrice):Ut(0)}},{key:"maxUsdDraw",get:function(){return this.pethPrice&&this.pethCollateral&&this.liquidationRatio?this.toUSD(this.maxEthDraw):Ut(0)}},{key:"needToFinishMigrating",get:function(){return this._proxyAddress&&this.noProxy}}],[{key:"toNumber",value:function(t){return f.a.isBigNumber(t)?t.toNumber():Ut(t).toNumber()}},{key:"displayPercentValue",value:function(t){return f.a.isBigNumber(t)||(t=new f.a(t)),t.times(100).toString()}},{key:"displayFixedValue",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return f.a.isBigNumber(t)||(t=new f.a(t)),a?t.toFixed(e,f.a.ROUND_DOWN).toString():t.toFixed(e).toString()}}]),t}(),Lt=a("b7d3"),Ht=a("1383");function zt(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,n)}return a}function Gt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?zt(a,!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):zt(a).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var Kt=Dt.a.MKR,Qt=Dt.a.DAI,Zt=function(t){return new f.a(t)},Jt=function(t,e,a){return Zt(t).times(Zt(e)).div(Zt(a))},Yt={components:{"generate-modal":J,"deposit-modal":st,"withdraw-modal":ft,"payback-modal":Pt,"back-button":u["a"],"close-cdp-modal":w,"move-cdp-modal":T},props:{tokensWithBalance:{type:Array,default:function(){return[]}},getBalance:{type:Function,default:function(){}},highestGas:{type:String,default:"0"}},data:function(){return{destAddressProxy:"",destAddressHasProxy:!1,afterUpdate:[],allCdpIds:[],activeCdp:{},activeValues:{maxPethDraw:Zt(0),maxEthDraw:Zt(0),maxUsdDraw:Zt(0),ethCollateral:Zt(0),pethCollateral:Zt(0),usdCollateral:Zt(0),debtValue:Zt(0),maxDai:Zt(0),collateralRatio:Zt(0),minEth:Zt(0),cdpId:"--"},availableCdps:{},cdps:[],cdpsWithoutProxy:[],cdpService:{},cdpDetailsLoaded:!1,currentProxy:null,currentCdpId:"",creatingCdp:!1,daiPrice:0,daiQty:0,ethPrice:Zt(0),ethQty:0,liquidationRatio:Zt(0),liquidationPenalty:Zt(0),makerActive:!1,makerCdp:{},makerManager:{},migrationInProgress:{},openCloseModal:!1,openMoveModal:!1,proxyService:{},proxyAddress:null,pethPrice:Zt(0),pethMin:Zt(0),priceService:{},priceFloor:0,stabilityFee:Zt(0),sysVars:{},sysServices:{},targetPrice:0,valuesUpdated:0,wethToPethRatio:Zt(0)}},computed:Gt({},Object(c["c"])("main",["account","gasPrice","web3","network","ens"]),{maxDaiDraw:function(){return this.ethQty<=0?0:Jt(this.ethPrice,this.ethQty,this.liquidationRatio)},minEthDeposit:function(){return this.daiQty<=0?0:Jt(this.liquidationRatio,this.daiQty,this.ethPrice)},showMoveOrClose:function(){return"manage-sai"===this.$route.name||"migrate-sai"===this.$route.name},showManage:function(){return this.listCdps||this.cdps.length>=1&&this.cdpsWithoutProxy.length>=1},showRefresh:function(){return this.cdps.length>0||this.cdpsWithoutProxy.length>0},onCreate:function(){return"create-sai"===this.$route.name},showCreateProxy:function(){return!this.showCdpMigrateButtons&&(!this.hasProxy&&!this.onCreate)},showCdpMigrateButtons:function(){return this.hasProxy&&this.cdpsWithoutProxy.length>=1},listCdps:function(){return this.cdps.length>1||this.cdpsWithoutProxy.length>1},hasProxy:function(){return null!==this.proxyAddress},currentProxyAddress:function(){return this.proxyAddress}}),watch:Object(o["a"])({},"account.address",(function(){this.makerActive=!1,this.setup()})),destroyed:function(){this.priceService={},this.cdpService={},this.proxyService={},this.availableCdps={},this.activeCdp={},this.makerCdp={},this.sysVars={},this.sysServices={}},mounted:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.setup();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{modalHidden:function(){this.openCloseModal=!1,this.openMoveModal=!1},gotoHome:function(){this.$router.push({name:"Maker-sai"})},gotoCreate:function(){this.$route.path.includes("maker-sai")&&(this.activeValues=this.systemValues,this.$router.push({name:"create-sai"}))},goToManage:function(){this.$route.path.includes("maker-sai")&&(1===this.cdps.length?this.$router.push({name:"manage-sai",params:{cdpId:this.cdps[0]}}):1===this.cdpsWithoutProxy.length?this.$router.push({name:"migrate-sai",params:{cdpId:this.cdpsWithoutProxy[0]}}):this.showManage?this.$router.push({name:"select-sai"}):this.gotoCreate())},openManage:function(t){this.$route.path.includes("maker-sai")&&(this.setupCdpManage(t),this.$router.push({name:"manage-sai",params:{cdpId:t}}))},openMigrate:function(t){this.$route.path.includes("maker-sai")&&(this.setupCdpManage(t),this.$router.push({name:"migrate-sai",params:{cdpId:t}}))},showDeposit:function(){this.$refs.deposit.$refs.modal.show()},showWithdraw:function(){this.$refs.withdraw.$refs.modal.show()},showPayback:function(){this.$refs.payback.$refs.modal.show()},showGenerate:function(){this.$refs.generate.$refs.modal.show()},showClose:function(){var t=this;this.$refs.closeCdp.$refs.modal.$on("hidden",(function(){t.$emit("modalHidden")})),this.$refs.closeCdp.$refs.modal.show()},showMove:function(){var t=this;this.$refs.moveCdp.$refs.modal.$on("hidden",(function(){t.$emit("modalHidden")})),this.destAddressHasProxy=!1,this.$refs.moveCdp.$refs.modal.show()},setup:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,r,o,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.activeCdps={},this.currentCdp={},e=this.web3,a=this,this.gotoHome(),n=Object(Ht["a"])(e,a.account.address,Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a.$route.path.includes("maker-sai")){t.next=3;break}return t.next=3,a.doUpdate();case 3:case"end":return t.stop()}}),t)})))),t.next=8,Dt.a.create("inject",{provider:{inject:e.currentProvider},plugins:[n],accounts:{myLedger1:{type:"mew"}}});case 8:return this.maker=t.sent,t.next=11,this.maker.authenticate();case 11:return this._priceService=this.maker.service("price"),t.next=14,this.maker.service("cdp");case 14:return this._cdpService=t.sent,t.next=17,this.maker.service("proxy");case 17:return this._proxyService=t.sent,t.next=20,this.maker.service("token");case 20:return this._tokenService=t.sent,this.pethMin=Zt(.005),t.t0=Zt,t.next=25,this._priceService.getEthPrice();case 25:return t.t1=t.sent.toNumber(),this.ethPrice=(0,t.t0)(t.t1),t.t2=Zt,t.next=30,this._priceService.getPethPrice();case 30:return t.t3=t.sent.toNumber(),this.pethPrice=(0,t.t2)(t.t3),t.t4=Zt,t.next=35,this._priceService.getPethPrice();case 35:return t.t5=t.sent.toNumber(),this._targetPrice=(0,t.t4)(t.t5),t.t6=Zt,t.next=40,this._cdpService.getLiquidationRatio();case 40:return t.t7=t.sent,this.liquidationRatio=(0,t.t6)(t.t7),t.t8=Zt,t.next=45,this._cdpService.getLiquidationPenalty();case 45:return t.t9=t.sent,this.liquidationPenalty=(0,t.t8)(t.t9),t.t10=Zt,t.next=50,this._cdpService.getAnnualGovernanceFee();case 50:return t.t11=t.sent,this.stabilityFee=(0,t.t10)(t.t11),t.t12=Zt,t.next=55,this._priceService.getWethToPethRatio();case 55:return t.t13=t.sent,this.wethToPethRatio=(0,t.t12)(t.t13),t.next=59,this._proxyService.currentProxy();case 59:return this.proxyAddress=t.sent,this.daiToken=this._tokenService.getToken(Qt),t.next=63,this.daiToken.balance();case 63:return this.daiBalance=t.sent.toBigNumber(),this.mkrToken=this._tokenService.getToken(Kt),t.next=67,this.mkrToken.balance();case 67:return this.mkrBalance=t.sent.toBigNumber(),i=Zt(this.pethMin).times(this.wethToPethRatio),this.systemValues={stabilityFee:this.stabilityFee,minEth:i,liquidationRatio:this.liquidationRatio,wethToPethRatio:this.wethToPethRatio,liquidationPenalty:this.liquidationPenalty,targetPrice:this._targetPrice,pethPrice:this.pethPrice},t.next=72,this.checkAllowances();case 72:return t.next=74,this.locateCdps();case 74:if(r=t.sent,o=r.withProxy,c=r.withoutProxy,this.cdps=o,this.cdpsWithoutProxy=c,!(this.cdps.length>0||this.cdpsWithoutProxy.length>0)){t.next=82;break}return t.next=82,this.loadCdpDetails();case 82:this.currentProxy=this.getProxy(),this.cdps.length>0||this.cdpsWithoutProxy.length>0?(this.cdpDetailsLoaded=!0,this.makerActive=!0,"create-sai"!==this.$route.name&&this.$route.path.includes("maker-sai")&&this.goToManage()):this.gotoCreate();case 84:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),buildEmpty:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.buildCdpObject(null);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),addCdp:function(){this.creatingCdp=!0},removeCdp:function(t){try{delete this.availableCdps[t.id],j["e"].responseHandler(this.$t("dapps-maker.cdp-closed"),j["e"].INFO)}catch(e){console.error(e)}},migrateCdpExternal:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.afterUpdate.push(this.goToManage),t.next=3,this.migrateCdp(e);case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),refreshExternal:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.doUpdate();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),refresh:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.doUpdate();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),doUpdate:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,r,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:return this.proxyAddress=t.sent,e=!1,a="create-sai"===this.$route.name,t.next=7,this.updateActiveCdp();case 7:n=regeneratorRuntime.mark((function t(a){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!s.activeCdps[a].needsUpdate){t.next=16;break}if(!s.activeCdps[a].closing){t.next=8;break}e=!0,delete s.activeCdps[a],s.cdps=s.cdps.filter((function(t){return t!==a})),s.cdpsWithoutProxy=s.cdpsWithoutProxy.filter((function(t){return t!==a})),t.next=16;break;case 8:if(!s.activeCdps[a].opening){t.next=13;break}return t.next=11,s.activeCdps[a].updateValues();case 11:t.next=16;break;case 13:return t.next=15,s.activeCdps[a].update();case 15:s.activeCdps[a]=t.sent;case 16:if(a!==s.currentCdpId){t.next=21;break}return t.next=19,s.currentCdp.update();case 19:return t.next=21,s.setupCdpManage(s.currentCdpId);case 21:case"end":return t.stop()}}),t)})),t.t0=regeneratorRuntime.keys(this.activeCdps);case 9:if((t.t1=t.t0()).done){t.next=14;break}return i=t.t1.value,t.delegateYield(n(i),"t2",12);case 12:t.next=9;break;case 14:return t.next=16,this.daiToken.balance();case 16:return this.daiBalance=t.sent.toBigNumber(),t.next=19,this.mkrToken.balance();case 19:return this.mkrBalance=t.sent.toBigNumber(),t.next=22,this.checkAllowances();case 22:if(Object.keys(this.activeCdps).includes(this.currentCdpId)){t.next=29;break}return t.next=25,this.loadCdpDetails();case 25:return t.next=27,this.setupCdpManage(this.currentCdpId);case 27:t.next=31;break;case 29:return t.next=31,this.setupCdpManage(this.currentCdpId);case 31:if(r=function t(){if(s.afterUpdate.length>0){var e=s.afterUpdate.pop();e(),t()}},r(),(e||a||this.creatingCdp)&&(this.cdps.length>0||this.cdpsWithoutProxy.length>0?this.goToManage():this.gotoCreate()),!this.creatingCdp){t.next=41;break}return this.creatingCdp=!1,t.next=38,this.updateActiveCdp();case 38:j["e"].responseHandler(this.$t("dapps-maker.cdp-created"),j["e"].INFO),t.next=43;break;case 41:this.valuesUpdated++,j["e"].responseHandler(this.$t("dapps-maker.cdp-updated"),j["e"].INFO);case 43:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),checkAllowances:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.proxyAddress){t.next=7;break}return t.next=3,this.daiToken.allowance(this.account.address,this.proxyAddress);case 3:return this._proxyAllowanceDai=t.sent.toBigNumber(),t.next=6,this.mkrToken.allowance(this.account.address,this.proxyAddress);case 6:this._proxyAllowanceMkr=t.sent.toBigNumber();case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),setupCdpManage:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!this.allCdpIds.includes(e)&&this.allCdpIds.length>0&&(e=this.allCdpIds[0]),0!==this.allCdpIds.length){t.next=5;break}this.activeValues=this.systemValues,t.next=9;break;case 5:return this.currentCdpId=e,t.next=8,this.getValuesForManage(e);case 8:this.activeValues=t.sent;case 9:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getValuesForManage:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=this.activeCdps[e],this.currentCdp=a,n=this._proxyAllowanceDai,i=this._proxyAllowanceMkr,r=this.toPeth,s=this.systemValues,t.abrupt("return",Gt({},s,{cdpId:e,maxPethDraw:a.maxPethDraw,maxEthDraw:a.maxEthDraw,maxUsdDraw:a.maxUsdDraw,ethCollateral:a.ethCollateral,pethCollateral:a.pethCollateral,usdCollateral:a.usdCollateral,debtValue:a.debtValue,maxDai:a.maxDai,collateralRatio:a.collatRatio,liquidationPrice:a.liquidationPrice,minEth:a.minEth,isSafe:!1,governanceFeeOwed:a.governanceFeeOwed,ethCollateralNum:a.ethCollateralNum,toPeth:r,proxyAllowanceDai:n,proxyAllowanceMkr:i,zeroDebt:a.zeroDebt}));case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),locateCdps:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.cdpsWithoutProxy=[],t.next=3,this.locateCdpsWithoutProxy();case 3:return this.cdpsWithoutProxy=t.sent,this.cdps=[],t.next=7,this.locateCdpsProxy();case 7:return this.cdps=t.sent,this.allCdpIds=[].concat(Object(r["a"])(this.cdpsWithoutProxy),Object(r["a"])(this.cdps)),t.abrupt("return",{withProxy:this.cdps,withoutProxy:this.cdpsWithoutProxy});case 10:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),locateCdpsWithoutProxy:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this._cdpService.getCdpIds(this.account.address);case 2:return e=t.sent,t.next=5,this._cdpService.getCdpIds(Object(Lt["b"])(this.account.address));case 5:return a=t.sent,t.abrupt("return",e.concat(a));case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),locateCdpsProxy:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:return this.proxyAddress=t.sent,t.next=5,this._cdpService.getCdpIds(this.proxyAddress);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),updateActiveCdp:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a,n,i,r,s,o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=Object.keys(this.activeCdps),t.next=3,this.locateCdps();case 3:if(a=this.cdps.filter((function(t){return!Object.keys(o.activeCdps).includes(t.toString())})),n=this.cdpsWithoutProxy.filter((function(t){return!Object.keys(o.activeCdps).includes(t.toString())})),i=e.filter((function(t){return!(o.cdps.includes(t.toString())||o.cdpsWithoutProxy.includes(t.toString()))})),i.length>0&&i.forEach((function(t){return delete o.activeCdps[t]})),!(a.length>0)){t.next=16;break}r=0;case 9:if(!(r<a.length)){t.next=16;break}return t.next=12,this.buildCdpObject(a[r]);case 12:this.activeCdps[a[r]]=t.sent;case 13:r++,t.next=9;break;case 16:if(!(n.length>0)){t.next=25;break}s=0;case 18:if(!(s<n.length)){t.next=25;break}return t.next=21,this.buildCdpObject(n[s],{noProxy:!0});case 21:this.activeCdps[n[s]]=t.sent;case 22:s++,t.next=18;break;case 25:0===this.cdps.length&&0===this.cdpsWithoutProxy.length&&this.gotoCreate();case 26:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadCdpDetails:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=0;case 1:if(!(e<this.cdps.length)){t.next=8;break}return t.next=4,this.buildCdpObject(this.cdps[e]);case 4:this.activeCdps[this.cdps[e]]=t.sent;case 5:e++,t.next=1;break;case 8:a=0;case 9:if(!(a<this.cdpsWithoutProxy.length)){t.next=16;break}return t.next=12,this.buildCdpObject(this.cdpsWithoutProxy[a],{noProxy:!0});case 12:this.activeCdps[this.cdpsWithoutProxy[a]]=t.sent;case 13:a++,t.next=9;break;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),buildCdpObject:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a,n,i,r,s=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=s.length>1&&void 0!==s[1]?s[1]:{},n=Gt({},a,{_proxyAddress:this.proxyAddress,liquidationPenalty:this.liquidationPenalty,stabilityFee:this.stabilityFee,ethPrice:this.ethPrice,_pethPrice:this.pethPrice,wethToPethRatio:this.wethToPethRatio,_targetPrice:this._targetPrice,liquidationRatio:this.liquidationRatio,proxyAllowanceDai:this.proxyAllowanceDai,proxyAllowanceMkr:this.proxyAllowanceMkr,_daiToken:this._daiToken,daiBalance:this.daiBalance,_mkrToken:this._mkrToken,mkrBalance:this.mkrBalance,minEth:this.minEth,pethMin:this.pethMin}),!this.cdpsWithoutProxy.includes(e)){t.next=8;break}return t.next=5,this.getMakerCdp(e,!1);case 5:this.cdp=t.sent,t.next=17;break;case 8:if(!this.cdps.includes(e)){t.next=14;break}return t.next=11,this.getMakerCdp(e,this.proxyAddress);case 11:this.cdp=t.sent,t.next=17;break;case 14:return t.next=16,this.getMakerCdp(e,!1);case 16:this.cdp=t.sent;case 17:if(i={account:this.account,_proxyService:this._proxyService,priceService:this.priceService,_cdpService:this._cdpService,doUpdate:this.doUpdate,getProxy:this.getProxy,hasProxy:this.hasProxy,getCdp:this.getMakerCdp,toPeth:this.toPeth,toUSD:this.toUSD,_proxyAddress:this.proxyAddress,liquidationPenalty:this.liquidationPenalty,stabilityFee:this.stabilityFee,ethPrice:this.ethPrice,_pethPrice:this.pethPrice,wethToPethRatio:this.wethToPethRatio,_targetPrice:this._targetPrice,liquidationRatio:this.liquidationRatio,proxyAllowanceDai:this.proxyAllowanceDai,proxyAllowanceMkr:this.proxyAllowanceMkr,_daiToken:this._daiToken,daiBalance:this.daiBalance,_mkrToken:this._mkrToken,mkrBalance:this.mkrBalance,minEth:this.minEth,pethMin:this.pethMin},r=new Nt(e,this.web3,i,n),!e){t.next=23;break}return t.next=22,r.init(e);case 22:return t.abrupt("return",t.sent);case 23:return t.abrupt("return",r);case 24:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),getProxy:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this._proxyService.currentProxy();case 2:if(this.proxyAddress=t.sent,this.proxyAddress){t.next=8;break}return t.next=6,this._proxyService.getProxyAddress(this.account.address);case 6:this.proxyAddress=t.sent,this.proxyAddress&&(this.noProxy=!1);case 8:return t.abrupt("return",this.proxyAddress);case 9:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),lockEth:function(t){this.currentCdp.lockEth(t)},wipeDai:function(t){this.currentCdp.wipeDai(t)},freeEth:function(t){var e=this;null===t[1]?this.currentCdp.freeEth(t[0]).then((function(){e.$route.path.includes("maker-sai")&&e.doUpdate()})):this.currentCdp.freeEth(t[0],t[1]).then((function(){e.$route.path.includes("maker-sai")&&e.doUpdate()}))},drawDai:function(t){null===t[1]?this.currentCdp.drawDai(t[0]):this.currentCdp.drawDai(t[0],t[1])},closeCdp:function(){this.currentCdp.closeCdp()},checkIfDestAddressHasProxy:function(t){var e=this;this.currentCdp.checkIfDestAddressHasProxy(t).then((function(t){e.destAddressProxy=t,e.destAddressHasProxy=null!==t})).catch((function(t){throw t}))},moveCdp:function(t){this.currentCdp.moveCdp(t)},calcCollatRatioDaiChg:function(t){return Zt(this.currentCdp.calcCollatRatio(this.currentCdp.ethCollateral,t))},calcCollatRatioEthChg:function(t){return Zt(this.currentCdp.calcCollatRatio(t,this.currentCdp.debtValue))},calcLiquidationPriceDaiChg:function(t){return Zt(this.currentCdp.calcLiquidationPrice(this.currentCdp.ethCollateral,t))},calcLiquidationPriceEthChg:function(t){return Zt(this.currentCdp.calcLiquidationPrice(t,this.currentCdp.debtValue))},approveDai:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this._tokenService.getToken(Qt).approveUnlimited(this.proxyAddress);case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),approveMkr:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this._tokenService.getToken(Kt).approveUnlimited(this.proxyAddress);case 1:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),hasCdp:function(t){return Object.keys(this.activeCdps).includes(Zt(t).toString())},getCdp:function(t){return this.activeCdps[t]},getMakerCdp:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!==e){t.next=2;break}return t.abrupt("return");case 2:if(!this.cdpsWithoutProxy.includes(e)){t.next=8;break}return t.next=5,this.maker.getCdp(e,!1);case 5:return t.abrupt("return",t.sent);case 8:if(!this.cdps.includes(e)||!this.proxyAddress){t.next=14;break}return t.next=11,this.maker.getCdp(e,this.proxyAddress);case 11:return t.abrupt("return",t.sent);case 14:if(!this.proxyAddress){t.next=18;break}return t.next=17,this.maker.getCdp(e,this.proxyAddress);case 17:return t.abrupt("return",t.sent);case 18:return t.next=20,this.maker.getCdp(e,!1);case 20:return t.abrupt("return",t.sent);case 21:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),buildProxy:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:if(this.proxyAddress=t.sent,this.proxyAddress){t.next=10;break}return t.next=6,this._proxyService.build();case 6:return t.next=8,this._proxyService.currentProxy();case 8:return this.proxyAddress=t.sent,t.abrupt("return",this.proxyAddress);case 10:return t.next=12,this._proxyService.currentProxy();case 12:return this.proxyAddress=t.sent,t.abrupt("return",this.proxyAddress);case 14:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),migrateCdp:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getProxy();case 2:if(a=t.sent,!a){t.next=6;break}return t.next=6,this._cdpService.give(e,a);case 6:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),minEth:function(){return this.wethToPethRatio?Zt(this.pethMin).times(this.wethToPethRatio):"--"},toUSD:function(t){return void 0===t||null===t?Zt(0):this.ethPrice.times(Zt(t))},toPeth:function(t){return Zt(t).eq(0)?Zt(0):Zt(t).div(this.wethToPethRatio)}}},Xt=Yt,te=(a("b125"),Object(x["a"])(Xt,n,i,!1,null,"89746876",null));e["default"]=te.exports},2455:function(t,e,a){},"394f":function(t,e,a){"use strict";var n=a("af87"),i=a.n(n);i.a},"753f":function(t,e,a){},"7b92":function(t,e,a){},"7c0e":function(t,e,a){"use strict";var n=a("148d"),i=a.n(n);i.a},9441:function(t,e,a){"use strict";var n=a("2455"),i=a.n(n);i.a},"9c3d":function(t){t.exports=JSON.parse('[{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"wad","type":"uint256"}],"name":"draw","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"jam","type":"uint256"},{"name":"wad","type":"uint256"},{"name":"otc_","type":"address"}],"name":"wipeAndFree","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"wad","type":"uint256"}],"name":"lockAndDraw","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"wad","type":"uint256"}],"name":"lockAndDraw","outputs":[{"name":"cup","type":"bytes32"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"registry_","type":"address"},{"name":"tub_","type":"address"}],"name":"createAndOpen","outputs":[{"name":"proxy","type":"address"},{"name":"cup","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"otc_","type":"address"}],"name":"shut","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"wad","type":"uint256"},{"name":"otc_","type":"address"}],"name":"wipe","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"wad","type":"uint256"}],"name":"wipe","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"}],"name":"open","outputs":[{"name":"","type":"bytes32"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"}],"name":"shut","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"}],"name":"lock","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"registry_","type":"address"},{"name":"tub_","type":"address"},{"name":"wad","type":"uint256"}],"name":"createOpenLockAndDraw","outputs":[{"name":"proxy","type":"address"},{"name":"cup","type":"bytes32"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"lad","type":"address"}],"name":"give","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"registry_","type":"address"},{"name":"tub_","type":"address"}],"name":"createOpenAndLock","outputs":[{"name":"proxy","type":"address"},{"name":"cup","type":"bytes32"}],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"jam","type":"uint256"}],"name":"free","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"tub_","type":"address"},{"name":"cup","type":"bytes32"},{"name":"jam","type":"uint256"},{"name":"wad","type":"uint256"}],"name":"wipeAndFree","outputs":[],"payable":true,"stateMutability":"payable","type":"function"}]')},af87:function(t,e,a){},b125:function(t,e,a){"use strict";var n=a("f888"),i=a.n(n);i.a},b459:function(t,e,a){"use strict";var n=a("753f"),i=a.n(n);i.a},c16c:function(t,e,a){"use strict";a.d(e,"e",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"c",(function(){return u})),a.d(e,"f",(function(){return l})),a.d(e,"h",(function(){return d})),a.d(e,"g",(function(){return h})),a.d(e,"a",(function(){return p})),a.d(e,"b",(function(){return m}));a("b680"),a("d3b7"),a("e25e"),a("25f0");var n=a("901e"),i=a.n(n),r=function(t){return new i.a(t)},s=function(t,e,a){return r(t).times(r(e)).div(r(a))};function o(t){return i.a.isBigNumber(t)||(t=new i.a(t)),t.times(100).toString()}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return i.a.isBigNumber(t)||(t=new i.a(t)),!isFinite(t)||isNaN(t)?"--":a?t.toFixed(e,i.a.ROUND_DOWN).toString():t.toFixed(e).toString()}function u(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=c(o(t),e,a);return isFinite(n)&&new i.a(n).gt(0)?n:"--"}function l(t,e,a,n){return s(r(t),r(e),r(a)).minus(r(n))}function d(t,e,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return r(t).minus(s(r(e).plus(.001),r(a),r(n))).minus(r(i).times(1))}function h(t,e,a,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return r(t).minus(s(r(e),r(a),r(n))).minus(r(i).times(1))}function p(t,e,a){return s(r(a),t,e)}function m(t,e,a,n){for(var i=parseInt(a),o=i;o>0;o--){var c=s(o,t,e).lte(r(n));if(c)return o}for(var u=100;u>0;u--){var l=s(u/100,t,e).lte(r(n));if(l)return u/100}return 0}},d4e0:function(t,e,a){"use strict";var n=a("7b92"),i=a.n(n);i.a},f09a:function(t,e,a){"use strict";var n=a("03c0"),i=a.n(n);i.a},f888:function(t,e,a){}}]);
//# sourceMappingURL=chunk-252ef923.e52e27f0.js.map